!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";(function(e){var t=r(2),n=function(e){return e&&e.__esModule?e:{default:e}}(t);e.binaryFetch=n.default}).call(t,r(1))},function(e,t,r){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),BinaryFetch=function(){function BinaryFetch(e,t){_classCallCheck(this,BinaryFetch),this.src=e,this.options=t}return _createClass(BinaryFetch,[{key:"fetch",value:function fetch(){var _this=this,XHR="undefined"==typeof XMLHttpRequest?eval("require")("xhr2"):XMLHttpRequest,xhr=new XHR;xhr.open(this.options.method?this.options.method:"GET",this.src),xhr.overrideMimeType("text/plain; charset=x-user-defined");for(var key in this.options.headers)obj.hasOwnProperty(key)&&xhr.setRequestHeader(key,this.options.headers[key]);this.options.timeout&&(xhr.timeout=this.options.timeout),xhr.onprogress=function(e){var t=_this.strToUint8Array(xhr.responseText);_this.progress({timeStamp:e.timeStamp,total:e.total,type:e.type,loaded:e.loaded,status:xhr.status,headers:_this.getResponseHeaders(xhr),arrayBuffer:function(){return _this.arrayBuffer(t)},arrayBufferView:function(){return Promise.resolve(t)},blob:function(){return _this.blob(t)},text:function(){return Promise.resolve(xhr.responseText)}})},xhr.onload=function(e){var t=_this.strToUint8Array(xhr.responseText);_this.resolve({timeStamp:e.timeStamp,total:e.total,type:e.type,loaded:e.loaded,status:xhr.status,headers:_this.getResponseHeaders(xhr),arrayBuffer:function(){return _this.arrayBuffer(t)},arrayBufferView:function(){return Promise.resolve(t)},blob:function(){return _this.blob(t)},text:function(){return Promise.resolve(xhr.responseText)},json:function(){return Promise.resolve(JSON.parse(xhr.responseText))}})},xhr.ontimeout=function(e){var t=new Error("Timeout");t.context=e,_this.reject(t)},xhr.onerror=function(e){var t=new Error("Fetch error");t.context=e,_this.reject(t)},xhr.send(this.options.body)}},{key:"strToUint8Array",value:function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t}},{key:"getResponseHeaders",value:function(e){for(var t=e.getAllResponseHeaders(),r=t.split("\n"),n={},o=0;o<r.length;o++){var i=r[o],s=i.substring(0,i.indexOf(":"));s.length>0&&(n[s]=i.substring(i.indexOf(":")+2,i.length-1))}return n}},{key:"arrayBuffer",value:function(e){return new Promise(function(t,r){for(var n=new ArrayBuffer(e.length),o=0;o<e.length;o++){var i=e[o];n[o]=i}t(n)})}},{key:"blob",value:function(e){return this.arrayBuffer(e).then(function(e){return new Blob([e])})}}]),BinaryFetch}();module.exports=function(e,t,r){var n=arguments;return new Promise(function(o,i){switch(n.length){case 0:i(new Error("Missing src argument"));break;case 1:t={},r=function(){};break;case 2:"function"==typeof n[1]?(t={},r=n[1]):r=function(){}}var s=new BinaryFetch(e,t);s.progress=r,s.resolve=o,s.reject=i,s.fetch()})}}]);